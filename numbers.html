<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Magic Numbers</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }

    .magic-number {
      position: absolute;
      font-size: 16px;
      color: #000;
      user-select: none;
    }

    #force-number {
      position: absolute;
      font-size: 20px;
      user-select: none;
    }
  </style>
</head>
<body>

<script>
  function createMagicNumbers(gridSize) {
    const body = document.body;
    const screenWidth = window.innerWidth;
    const screenHeight = window.innerHeight;

    const cellWidth = screenWidth / gridSize;
    const cellHeight = screenHeight / gridSize;

    const magicNumbers = [];

    // Generate an array with unique two-digit numbers
    const uniqueNumbers = Array.from({ length: gridSize * gridSize }, (_, i) => i + 10).sort(() => Math.random() - 0.5);

    let numberIndex = 0;

    for (let i = 0; i < gridSize; i++) {
      for (let j = 0; j < gridSize; j++) {
        const magicNumber = document.createElement('div');
        magicNumber.className = 'magic-number';

        const positionX = i * cellWidth + Math.random() * (cellWidth - 20);
        const positionY = j * cellHeight + Math.random() * (cellHeight - 20);

        magicNumber.style.left = positionX + 'px';
        magicNumber.style.top = positionY + 'px';

        // Set the unique two-digit number
        magicNumber.textContent = uniqueNumbers[numberIndex];

        // Randomly adjust the font size
        const randomSize = Math.floor(Math.random() * 16) + 10; // Adjust the range as needed
        magicNumber.style.fontSize = randomSize + 'px';

        magicNumber.addEventListener('touchstart', handleTouchStart, false);

        magicNumbers.push(magicNumber);
        body.appendChild(magicNumber);

        numberIndex++;
      }
    }

    return magicNumbers;
  }

  function createForceNumber() {
    const body = document.body;
    const screenWidth = window.innerWidth;
    const screenHeight = window.innerHeight;

    // Remove any existing force numbers
    const existingForceNumbers = document.querySelectorAll('#force-number');
    existingForceNumbers.forEach((number) => {
      number.remove();
    });

    // Create the force number
    const forceNumber = document.createElement('div');
    forceNumber.id = 'force-number';
    forceNumber.textContent = '27';

    // Place the force number at a random position on the screen
    const forceX = Math.random() * (screenWidth - 60);
    const forceY = Math.random() * (screenHeight - 60);

    forceNumber.style.left = forceX + 'px';
    forceNumber.style.top = forceY + 'px';
    body.appendChild(forceNumber);

    return forceNumber;
  }

  function handleTouchStart() {
    // If touch is detected after zooming, reset the last touch time
    lastTouchTime = Date.now();
    isZooming = false;
  }

  function checkForceNumberPosition() {
    const forceNumber = document.getElementById('force-number');
    if (forceNumber) {
      const forceX = forceNumber.offsetLeft;
      const forceY = forceNumber.offsetTop;

      // Jump to the exact position of the force number
      window.scrollTo({
        top: forceY,
        left: forceX,
        behavior: 'smooth' // Add smooth scrolling effect
      });
    }
  }

  // Function to check if a point overlaps with other elements
  function isOverlapping(x, y, elements) {
    for (const element of elements) {
      const rect = element.getBoundingClientRect();
      if (
        x < rect.right &&
        x + 60 > rect.left &&
        y < rect.bottom &&
        y + 60 > rect.top
      ) {
        return true; // Overlapping
      }
    }
    return false; // Not overlapping
  }

  let lastTouchTime = Date.now();
  let isZooming = false;
  const magicNumbers = createMagicNumbers(8); // You can change this number to adjust the grid size
  const forceNumber = createForceNumber();

  // Add event listener for zoom and swipe detection
  document.addEventListener('touchstart', () => {
    lastTouchTime = Date.now();
    isZooming = false;
  });

  document.addEventListener('touchmove', () => {
    isZooming = true;
  });

  document.addEventListener('touchend', () => {
    if (isZooming && Date.now() - lastTouchTime > 500) {
      // If zooming and last touch was more than 500ms ago, jump to force number
      checkForceNumberPosition();
    }
  });

</script>

</body>
</html>
