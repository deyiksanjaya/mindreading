<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Recording</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
          font-family: sans-serif;
          margin: 0;
          padding: 0;
          display: flex;
          justify-content: center; /* Center horizontally */
          align-items: center; /* Center vertically */
          min-height: 100vh; /* Fills viewport height */
          background-color: #f5f5f5;
        }

        .container {
          display: flex;
          flex-direction: column;
          align-items: center;
          padding-bottom: 100px; /* Adjust for button height */
        }

        h1 {
          margin-top: 0;
          font-size: 2em;
          color: #333;
          text-align: center; /* Center the title */
        }

        #recorder {
          margin-bottom: 20px;
          font-size: 5em;
          color: #ddd;
        }

        #recordings {
          margin-top: 20px;
          overflow-y: auto; /* Enable scrolling for long lists */
          border-top: 1px solid #ddd;
          padding-top: 10px;
          padding-bottom: 0; /* Remove default bottom padding */
        }

        #recordings li {
          margin-bottom: 10px;
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 10px;
          border-bottom: 1px solid #eee;
          cursor: pointer; /* Simulate clickable list items */
        }

        #recordings li:hover {
          background-color: #eee;
        }

        #recordings li .title {
          display: flex;
          align-items: center;
        }

        #recordings li .title button {
          margin-right: 20px; /* Add margin to separate from title */
          border: none; /* Remove border */
          background: none; /* Remove background */
          cursor: pointer; /* Change cursor */
          position: relative; /* Position relative for absolute positioning */
        }

        #recordings li span.duration {
          color: #666;
          margin-left: 200px; /* Add margin to separate from title */
          margin-right: 30px;
        }

        #recordings li button.play-button i {
          font-size: 1.5em; /* Adjust play button size */
          color: #333; /* Play button color */
          position: absolute; /* Position absolute for precise positioning */
          top: 50%; /* Center vertically */
          left: 50%; /* Center horizontally */
          transform: translate(-50%, -50%); /* Center the icon */
        }

        #recordings li button.play-button i.fa-pause {
          display: none; /* Hide pause icon by default */
        }

        #recordings li button.play-button.playing i.fa-play {
          display: none; /* Hide play icon when paused */
        }

        #recordings li button.play-button.playing i.fa-pause {
          display: inline; /* Show pause icon when playing */
        }

        #recordings li button.play-button:hover i.fa-play {
          color: #ff5252; /* Hover color for play icon */
        }

        #recordings li button.play-button:hover i.fa-pause {
          color: #ff5252; /* Hover color for pause icon */
        }

.record-button {
  position: absolute;
  top: calc(100% + 50px);
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 60px;
  background-color: #ff5252;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16);
}

.record-button:hover {
  background-color: #ff6e6e;
}

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>My Recordings</h1>
        <div id="recorder">
            <i class="fas fa-microphone"></i>
        </div>
        <ul id="recordings"></ul>
    </div>
    <button class="record-button"></button>
    <script>
document.addEventListener("DOMContentLoaded", function() {
    const recordings = [
      { title: "Recording 1", value: 1, audioURL: "https://od.lk/s/ODhfMTUwOTI0NzJf/Recording%201.mp3" },
      { title: "Recording 2", value: 2, audioURL: "https://od.lk/s/ODhfMTUwOTI0NzNf/Recording%202.mp3" },
      { title: "Recording 3", value: 4, audioURL: "https://od.lk/s/ODhfMTUwOTI0NzRf/Recording%203.mp3" },
      { title: "Recording 4", value: 8, audioURL: "https://od.lk/s/ODhfMTUwOTI0NzVf/Recording%204.mp3" },
      { title: "Recording 5", duration: "00:10" } // Fixed duration for recording 5
    ];
    
    let total = 0;
    let currentPlayingButton = null;
    let playedRecordings = []; // Maintain a list of played recordings
    let audio = new Audio();
    
    const audioMapping = {
      1: "https://od.lk/s/ODhfMTUwOTI0NzJf/Recording%201.mp3",
      2: "https://od.lk/s/ODhfMTUwOTI0NzNf/Recording%202.mp3",
      4: "https://od.lk/s/ODhfMTUwOTI0NzRf/Recording%203.mp3",
      8: "https://od.lk/s/ODhfMTUwOTI0NzVf/Recording%204.mp3"
    };
    
    const monthAudioMapping = {
      1: "https://example.com/january.mp3",
      2: "https://example.com/february.mp3",
      3: "https://example.com/march.mp3",
      4: "https://example.com/april.mp3",
      5: "https://example.com/may.mp3",
      6: "https://example.com/june.mp3",
      7: "https://example.com/july.mp3",
      8: "https://example.com/august.mp3",
      9: "https://example.com/september.mp3",
      10: "https://example.com/october.mp3",
      11: "https://example.com/november.mp3",
      12: "https://example.com/december.mp3"
    };
    
    const recordingsList = document.getElementById("recordings");
    recordings.forEach((recording, index) => {
        
      const recordingItem = document.createElement("li");
      if (recording.duration) {
        recordingItem.innerHTML = `
          <span class="title">
            <button class="play-button" data-value="${recording.value}" data-recording="${index + 1}"><i class="fas fa-play"></i></button>
            ${recording.title}
          </span>
          <span class="duration">${recording.duration}</span>
        `;
      } else {
        const audioElement = new Audio(recording.audioURL);
        audioElement.addEventListener("loadedmetadata", function() {
          const duration = formatDuration(audioElement.duration);
          recording.duration = duration;
          recordingItem.querySelector(".duration").textContent = duration;
        });
        recordingItem.innerHTML = `
          <span class="title">
            <button class="play-button" data-value="${recording.value}" data-recording="${index + 1}"><i class="fas fa-play"></i></button>
            ${recording.title}
          </span>
          <span class="duration">00:09</span>
        `;
      }
      recordingsList.appendChild(recordingItem);
    });
    
    const playButtons = document.querySelectorAll(".play-button");
    
    playButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const value = parseInt(button.getAttribute("data-value"));
        if (!isNaN(value)) {
          if (!playedRecordings.includes(value)) {
            total += value;
            playedRecordings.push(value);
          }
          console.log("Total:", total);
        }
    
        const icon = button.querySelector("i");
        const listItem = button.closest("li");
    
        if (icon.classList.contains("fa-play")) {
          icon.classList.remove("fa-play");
          icon.classList.add("fa-pause");
          button.classList.add("playing");
    
          if (currentPlayingButton && currentPlayingButton !== button) {
            const currentIcon = currentPlayingButton.querySelector("i");
            currentIcon.classList.remove("fa-pause");
            currentIcon.classList.add("fa-play");
            currentPlayingButton.classList.remove("playing");
            audio.pause();
          }
    
          currentPlayingButton = button;
    
          if (value && audioMapping[value]) {
            audio.src = audioMapping[value];
            audio.play();
          }
        } else {
          icon.classList.remove("fa-pause");
          icon.classList.add("fa-play");
          button.classList.remove("playing");
    
          currentPlayingButton = null;
          audio.pause();
        }
      });
    });
    
    audio.addEventListener("ended", () => {
      if (currentPlayingButton) {
        const icon = currentPlayingButton.querySelector("i");
        icon.classList.remove("fa-pause");
        icon.classList.add("fa-play");
        currentPlayingButton.classList.remove("playing");
        currentPlayingButton = null;
      }
    });
    
    const recording5Button = document.querySelector(".play-button[data-recording='5']");
    if (recording5Button) {
      recording5Button.addEventListener("click", () => {
        console.log("Total:", total);
        if (total !== 0) {
          const monthAudioFile = monthAudioMapping[total];
          if (monthAudioFile) {
            console.log("Month audio file to play:", monthAudioFile);
            // Here you can play the month audio file
            // For example:
            // audio.src = monthAudioFile;
            // audio.play();
          } else {
            console.error("No audio file found for total:", total);
          }
          total = 0;
        } else {
          console.log("Total is 0. No audio file to determine.");
        }
      });
    } else {
      console.error("Recording 5 button not found.");
    }
    
    function formatDuration(seconds) {
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = Math.floor(seconds % 60);
      return `${minutes.toString().padStart(2, "0")}:${remainingSeconds.toString().padStart(2, "0")}`;
    }
});

    </script>
</body>
</html>
